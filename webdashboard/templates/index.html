{% extends "base.html" %}
{% block title %} Dashboard {% endblock %}
{% block content %} 



        <div class = 'dashboard'>
            <h1> Welcome {{content}}! </h1>
            <h1> This is a simple dashboard to view and manage QM assets </h1>
            <p> Lets get started! </p>
                    

            <div class = 'timeButtons'>
                <button onclick = "processWeeklyData('Week 1', 'June')"> Weekly </button>
                <button onclick="processMonthlyData('June')"> Monthly </button>

            </div>


            <div class = "total-display">
                <p> Viewing: <span id = "date"> null </span> 2025 </p>
                <h1>Total Assets: <span id="sum">0</span></h1>
            </div> 
            
            <div class = "file bars">
                <div class = "bar" data-type="images"></div>
                <div class = "bar" data-type="videos"></div>
                <div class = "bar" data-type="audio"></div>
                <div class = "bar" data-type="documents"></div>
                <canvas id="barCharts" style="width:100%;max-width:700px"></canvas>
            </div>
        </div>

        <script>  
        //alright to put data here and not on json file?
         const all_data =  {"June": {"Week 1": {"images": 120, "videos": 45, "audio": 35, "documents": 65},
                        "Week 2": {"images": 95, "videos": 60, "audio": 25, "documents": 70},
                        "Week 3": {"images": 62, "videos": 91, "audio": 40, "documents": 48},
                        "Week 4": {"images": 99, "videos": 23, "audio": 42, "documents": 89}
                        },
            "May":  {"Week 1": {"images": 48, "videos": 64, "audio": 38, "documents": 29},
                        "Week 2": {"images": 189, "videos": 224, "audio": 65, "documents": 100},
                        "Week 3": {"images": 29, "videos": 1, "audio": 119, "documents": 64},
                        "Week 4": {"images": 391, "videos": 10, "audio": 9, "documents": 23}
                        },
            "April": {"Week 1": {"images": 89, "videos": 33, "audio": 28, "documents": 29},
                        "Week 2": {"images": 46, "videos": 28, "audio": 91, "documents": 371},
                        "Week 3": {"images": 227, "videos": 72, "audio": 74, "documents": 217},
                        "Week 4": {"images": 3, "videos": 43, "audio": 42, "documents": 292}
                        }
        };  




        const stuff = document.getElementById("barCharts").getContext("2d")



        function processMonthlyData(exactMonth){
            const month_data = {images:0, videos:0, audio:0, documents:0}
            let value = null
            for (let month in all_data){
                if (month === exactMonth){
                    value = all_data[month]
                    break
                }
            }

            for (week in value){
                month_data.images += value[week].images
                month_data.videos += value[week].videos
                month_data.audio += value[week].audio
                month_data.documents += value[week].documents
            }

            let sum = 0;
            for (number in month_data){
                sum+=month_data[number];
            }
            document.getElementById('sum').textContent = sum

            document.getElementById('date').textContent = exactMonth

        }


        function processWeeklyData(exactWeek, exactMonth){
            let week_data = null
            for (month in all_data){
                if (all_data[exactMonth][exactWeek]){
                    week_data = all_data[exactMonth][exactWeek]
                    break
                }
            }

            let sum = 0;
            for (number in week_data){
                sum+=week_data[number];
            }
            document.getElementById('sum').textContent = sum
            
            document.getElementById('date').textContent = exactWeek + " " + exactMonth




            


        }
        
        
        
        const myChart = new Chart("barCharts", {
            type: "bar",
            data: {
                labels: ["Images", "Videos", "Audio", "Documents"],
                datasets: [{
                    data: Object.values([4,5,6,10]),
                    backgroundColor: [
                    'rgba(255, 99, 132, 0.2)',
                    'rgba(255, 159, 64, 0.2)',
                    'rgba(255, 205, 86, 0.2)',
                    'rgba(75, 192, 192, 0.2)',
                ]
                }]
            },
            options: {
                indexAxis: 'y'

            }
        })


        
        


         </script>
{% endblock %}