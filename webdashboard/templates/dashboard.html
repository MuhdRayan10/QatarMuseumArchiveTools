{% extends "base.html" %}
{% block title %}Dashboard{% endblock %}

{% block content %}

<!-- TAB HEADERS -->
<ul class="nav nav-tabs mb-2" id="dashboardTab" role="tablist">
  <li class="nav-item" role="presentation">
    <button class="nav-link active"
            id="preview-tab"
            data-bs-toggle="tab"
            data-bs-target="#preview"
            type="button" role="tab"
            aria-controls="preview"
            aria-selected="true">
      <i class="bi bi-eye"></i> Preview
    </button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link"
            id="stats-tab"
            data-bs-toggle="tab"
            data-bs-target="#stats"
            type="button" role="tab"
            aria-controls="stats"
            aria-selected="false">
      <i class="bi bi-bar-chart"></i> Statistics
    </button>
  </li>
</ul>

<div class="tab-content bg-white rounded shadow-sm p-3" id="dashboardTabContent">
  <!-- PREVIEW PANE -->
  <div class="tab-pane fade show active" 
       id="preview" 
       role="tabpanel" 
       aria-labelledby="preview-tab">
    <div class="row mb-3">
      <div class="col-auto">
        <button id="prevBtn" class="btn btn-outline-primary rounded-pill px-4 me-2">&larr; Prev</button>
        <button id="nextBtn" class="btn btn-primary rounded-pill px-4">Next &rarr;</button>
      </div>
      <div class="col-auto d-flex align-items-center">
        <span id="previewCounter" class="fw-bold text-secondary">0 / 0</span>
      </div>
    </div>
    <div id="previewArea" class="border rounded-3 p-4 text-center bg-light shadow-sm">
      <!-- injected by JS -->
    </div>
  </div>

  <!-- STATISTICS PANE -->
  <div class="tab-pane fade" 
       id="stats" 
       role="tabpanel" 
       aria-labelledby="stats-tab">
    <div class="row mb-4">
      <div class="col-md-4 mb-2" id="statTimeSelector">
      </div>
      <div class="col-md-4 mb-2">
        <label for="statView" class="form-label fw-semibold">View By</label>
        <select id="statView" class="form-select">
          <option value="weekly">Weekly</option>
          <option value="monthly">Monthly</option>
        </select>
      </div>
      <div class="col-md-4 d-flex align-items-end">
        <div class="card border-0 bg-primary text-white w-100 shadow">
          <div class="card-body">
            <h5 class="card-title">Total Assets</h5>
            <h2 id="totalAssets" class="display-5 fw-bold">0</h2>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-8 mb-0">
        <div class="bg-light rounded-3 p-2 shadow-sm" style="height:350px">
          <canvas id="statsChart" style="height:100%"></canvas>
        </div>
      </div>
      <div class="col-md-4 mb-0">
        <div class="bg-light rounded-3 p-2 shadow-sm justify-content-center align-items-center">
          <canvas id="pieChart"></canvas>
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock %}